
<div id="fixed-container">
  <section  id="toc_wraper" style="width:250px; background-color: #e6e6e6; margin:auto 10px; z-index:99999;" >
    {% include widgets/toc %}
  </section>
  <section>
    {% include widgets/repos_list %}
  </section>
  <section>
    <div id="xiami" style="padding:10px">{% include widgets/xiami %}</div>
  </section>
  <div style="position: relative; background-color: #e6e6e6;top: -49px;margin:auto 5px">
     <section>{% include widgets/contacts_list %}</section>
     <section>{% include widgets/links_list    %}</section>
  </div>
</div>

<script type="text/javascript">
$('#toc_wraper').hide();
$(document).ready(function() {
  var position = $('#toc_wraper').offset();
  $(window).scroll(function() {
    if($(window).scrollTop() > position.top) {
      var h= document.getElementById('toc_wraper').offsetHeight ;
      if( window.innerHeight - 58 < h ) {
        var v = window.innerHeight - 58 - h ;
        $('#toc_wraper').css('position','fixed').css('top',v);
      } else {
        $('#toc_wraper').css('position','fixed').css('top','0');
      }
    } else {
      $('#toc_wraper').css('position','static');
    }
  });
  if(matchMedia) {
    var mq = matchMedia('(max-width: 999px)');
    mq.addListener(function(mql) {
      if (!mql.matches) {
        position = $('#toc_wraper').offset();
      }
    });
  }
});
</script>

<!--
<script type="text/javascript">
$(document).ready(function() {
  var position = $('#toc_wraper').offset();
  $(window).scroll(function() {
    if($(window).scrollTop() > position.top) {
      $('#toc_wraper').css('position','fixed').css('top','0');
    } else {
      $('#toc_wraper').css('position','static');
    }
  });
  if(matchMedia) {
    var mq = matchMedia('(max-width: 999px)');
    mq.addListener(function(mql) {
      if (!mql.matches) {
        position = $('#toc_wraper').offset();
      }
    });
  }
});
</script>
-->

