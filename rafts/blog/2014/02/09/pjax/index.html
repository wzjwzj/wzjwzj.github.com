
<!DOCTYPE html>
<!--[if IE 7 ]>    <html lang="zh-CN" class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="zh-CN" class="ie8"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html lang="zh-CN"> <!--<![endif]-->

<head>
  <meta charset="UTF-8">
  <!--[if IE 8 ]><meta http-equiv="X-UA-Compatible" content="IE=7"><![endif]-->

  <title>[转]Pjax是什么以及为什么推荐大家用</title>
  
  
  <meta name="author" content="孤月谁明">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Favicon -->
  <link rel="shortcut icon" href="/favicon.ico">

  <!-- Feed -->
  <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml">
  <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/atom.xml">

  <!-- Styles -->
  <link rel="stylesheet" href="/assets/themes/twitter/css/style.min.css">
  <!--link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet"-->
  <link rel="stylesheet" href="/assets/font-awesome-4.0.3/css/font-awesome.min.css">
  <!--link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"-->
  <!--link rel="stylesheet" href="/assets/prettify/prettify.css"-->
  
  <!-- Scripts -->
  <script type="text/javascript" src="/assets/themes/twitter/js/jquery-1.10.1.min.js"></script>
  <script type="text/javascript" src="/assets/jquery-ui/js/jquery-ui-1.10.4.custom.min.js"></script>
  <link   rel="stylesheet"      href="/assets/jquery-ui/css/smoothness/jquery-ui-1.10.4.custom.min.css">

  

  

  

  

</head>

<body>

  <div id="wrap">
    <header id="top">
      <!-- Navigation Bar -->
      <nav id="navbar">
        <ul>
          
          <li>
            <a href="/" rel="nofollow" title="首页">首页</a>
          </li>
          <li>
            <a href="/archives.html" rel="nofollow" title="archives">归档</a>
          </li>
          <li>
            <a href="/messages.html" rel="nofollow" title="留言板">留言板</a>
          </li>
	  
	  <li>
	  <a href="/links.html" rel="nofollow" title="链接">链接</a>
	  </li>
	  
          <li>
            <a href="/about.html" rel="nofollow" title="关于">关于</a>
	  </li>

          <li>
	  <a href="/lino.html" rel="nofollow" title="便签">便签</a>
	  </li>

	  <li>
	  <a href="/gallery.html" rel="nofollow" title="相册">相册</a>
	  </li>

	  <li>
	  <a href="/slide.html" rel="nofollow" title="PPT">PPT</a>
	  </li>
	  
	  <li>
	  <a href="/docs/" rel="nofollow" title="docs">docs</a>
	  </li>

          <li>
            <a href="/rss.xml" rel="nofollow" title="订阅 RSS"><i class="fa fa-rss fa-2"></i></a>
          </li>
	  <li >
            <i id="icon-resize" class="fa fa-expand fa-2"></i>
          </li>
        </ul>
      </nav>
    </header>

    <section id="main">

      <!-- Sidebar -->
      <aside id="sidebar">
        <section id="search-box">
	 
<CENTER>
<!--img src="/assets/themes/twitter/img/google_search.png" border="0" alt="Google" align="absmiddle" style="padding-bottom:20px" /--> 
<!--FONT class='wdnx' ><B>惟德乃兴</B></FONT-->

<form  method="get" action="/gsearch.html">
  <input  type="text"   class="search-query" name="q"   placeholder="谷歌引擎搜索"></input>   
  <!--button type="submit" class="search-button" ><i class="icon-search"></i></button-->
</form>

<form  method="get" action="/search.html">
  <input  type="text"   class="search-query" name="q"   placeholder="站内正则搜索"></input>   
  <!--button type="submit" class="search-button" ><i class="icon-search"></i></button-->
</form>

<form  method="get" action="/dict.html">
  <input  type="text"   class="search-query" name="q"   placeholder="dict.cn 海词"></input>   
  <!--button type="submit" class="search-button" ><i class="icon-search"></i></button-->
</form>

<form id="glosbe" name="glosbe"  method="get" action="/glosbe.html"> 
  <input  type="text"   id="phrase"  name="phrase"  placeholder="dictionary" class="search-query">  
  <select name="from" onchange='set_item_from( )'>
    <option value="deu" >deutsch</option>
    <option value="eng" >english</option>
    <option value="zho" >汉语</option>
  </select>
  <select name="dest" onchange='set_item_dest( )' >
    <option value="zho">汉语</option>
    <option value="eng">english</option>
    <option value="deu">deutsch</option>
  </select> 
  <!--input  type="text"   id="phrase"  name="phrase"  placeholder="dictionary" class="search-query"-->  
  <!--button type="submit" class="search-button" ><i class="icon-search"></i></button-->
</form> 
<div id="keyboard" style="display:none; "> 
	<a href="javascript:addSpecChar('ä')" class="btn">ä</a> 
	<a href="javascript:addSpecChar('Ä')" class="btn">Ä</a> 
	<a href="javascript:addSpecChar('ö')" class="btn">ö</a> 
	<a href="javascript:addSpecChar('Ö')" class="btn">Ö</a> 
	<a href="javascript:addSpecChar('ü')" class="btn">ü</a> 
	<a href="javascript:addSpecChar('Ü')" class="btn">Ü</a> 
	<a href="javascript:addSpecChar('ß')" class="btn">ß</a> 
	<a href="javascript:addSpecChar('ẞ')" class="btn">ẞ</a> 
</div>
</CENTER>


<SCRIPT language=JavaScript>
  function showhidekeyboard(){
    if($('#glosbe select[name="from"]').val() == 'deu' ){
	$('#keyboard').css("display","inline-block");
    }else{
	$('#keyboard').css("display","none");
    }
  }
  if ( !sessionStorage.getItem("from") ) {  
	sessionStorage.setItem("from", "deu");
        $('#glosbe select[name="from"]').val("deu");
  }else{
	$('#glosbe select[name="from"]').val(sessionStorage.getItem("from"));
  }
  showhidekeyboard();
  if ( !sessionStorage.getItem("dest") ) {  
	sessionStorage.setItem("dest", "zho");
        $('#glosbe select[name="dest"]').val("zho");
  }else{
        $('#glosbe select[name="dest"]').val(sessionStorage.getItem("dest"));
  }
  function set_item_from( ){
	sessionStorage.setItem('from', $('#glosbe select[name="from"]').val());
	showhidekeyboard();
  }
  function set_item_dest( ){
	sessionStorage.setItem('dest', $('#glosbe select[name="dest"]').val());
  }
  function addSpecChar(NewCode) {
    document.glosbe.phrase.value += ''+NewCode+''; 
    var t=$("#phrase").val(); $("#phrase").val("").focus().val(t);
  };
</SCRIPT>


	</section>
	<section>
	 <div style="padding:22px 18px">
	 <a class=social style="background-image: url('/images/social/Icon_Seminar.jpg');"  target="_blank" href="http://seismo.geo.uni-potsdam.de/upseismo/wiki/SeminarTalks" title="Seminar Talks">social</a>
	 <a class=social style="background-image: url('/images/social/mail-icon.jpg');"  target="_blank" href="https://coesite.geo.uni-potsdam.de/src/login.php" title="Email Coesite">social</a>
	 <a class=social style="background-image: url('/images/social/calligraphy.png');"  target="_blank" href="/demos/calligraphy.html" title="每日一字">calligraphy</a>
	 <a class=social style="background-image: url('/images/social/gmt_nav.gif');"  target="_blank" href="http://gmt.soest.hawaii.edu/doc/5.1.0/index.html" title="gmt">gmt</a>
	 <a class=social style="background-image: url('/images/social/kiwi.png');"  target="_blank" href="http://kinherd.org/" title="kiwi tools">kiwi</a>
	 </div>
	</section>
	<!--toc>
	<div id="toc_wraper" style="display:none">
	<section>
	   <a href="#"><i class="fa fa-list fa-2"></i> 目录 </a>
	   <div class="toc">
	</section>
	</div-->
	
	<!--toc-->
	

	<!--widget default include  -->
	
	   
  <section  class="active"><a href="/archive.html" title="查看所有文章"><i class="fa fa-file-text fa-2"></i> 最近发表</a>
<span title="文章总数">18</span>
<ul>

  <li><a href="/blog/2014/04/16/abic0" title="查看《ABIC0》">ABIC0</a></li>

  <li><a href="/blog/2014/03/03/ABIC" title="查看《ABIC》">ABIC</a></li>

  <li><a href="/blog/2014/02/25/chinese-food-recipe" title="查看《菜单》">菜单</a></li>

  <li><a href="/blog/2014/02/17/tar" title="查看《[转]tar 压缩解压缩命令详解》">[转]tar 压缩解压缩命令详解</a></li>

  <li><a href="/blog/2014/02/09/pjax" title="查看《[转]Pjax是什么以及为什么推荐大家用》">[转]Pjax是什么以及为什么推荐大家用</a></li>

  <li><a href="/blog/2014/02/08/nationalparks-in-deutschland" title="查看《测试谷歌地图:德国国家公园》">测试谷歌地图:德国国家公园</a></li>

  <li><a href="/blog/2014/01/20/kiwi_info" title="查看《kiwi_info》">kiwi_info</a></li>

  <li><a href="/blog/2014/01/14/smalltool" title="查看《small tools,widgets or applets list》">small tools,widgets or applets list</a></li>

  <li><a href="/blog/2014/01/12/haskell-on-ubuntu" title="查看《haskell on ubuntu》">haskell on ubuntu</a></li>

  <li><a href="/blog/2014/01/11/command_pool" title="查看《常用命令示例》">常用命令示例</a></li>

  <li><a href="/blog/2014/01/08/amssymbols" title="查看《AMSsymbols》">AMSsymbols</a></li>

  <li><a href="/blog/2013/12/18/build-repository-with-dropbox" title="查看《用dropbox虚拟github建立私有仓库》">用dropbox虚拟github建立私有仓库</a></li>

  <li><a href="/blog/2013/12/17/scripts" title="查看《一些示例脚本存档》">一些示例脚本存档</a></li>

  <li><a href="/blog/2013/12/15/test-self-def-input" title="查看《测试自定义输入》">测试自定义输入</a></li>

  <li><a href="/blog/2013/12/14/problems-refer-cygwin" title="查看《cygwin下个人使用过程中所遇问题汇总》">cygwin下个人使用过程中所遇问题汇总</a></li>

</ul>
</section>
  <section ><a href="/categories.html" title="查看所有分类"><i class="fa fa-folder-open fa-2"></i> 文章分类</a>
<span title="分类总数">8</span>
<ul>

  <li><a href="/categories.html#uncategorized-ref" rel="nofollow">uncategorized (8)</a></li>

  <li><a href="/categories.html#info-ref" rel="nofollow">info (5)</a></li>

  <li><a href="/categories.html#git-ref" rel="nofollow">git (1)</a></li>

  <li><a href="/categories.html#programming-ref" rel="nofollow">programming (1)</a></li>

  <li><a href="/categories.html#dropbox-ref" rel="nofollow">dropbox (1)</a></li>

  <li><a href="/categories.html#study-ref" rel="nofollow">study (1)</a></li>

  <li><a href="/categories.html#旅游-ref" rel="nofollow">旅游 (1)</a></li>

  <li><a href="/categories.html#unix-ref" rel="nofollow">unix (1)</a></li>

</ul>
</section>
  <section ><a href="/tags.html" title="查看所有标签"><i class="fa fa-tags fa-2"></i> 标签云</a>
<span title="标签总数">19</span>
<div id="tag-cloud">


  
  <a href="/tags.html#info-ref" rel="nofollow" style="font-size: 18pt; color: #000;">info</a>

  
  <a href="/tags.html#git-ref" rel="nofollow" style="font-size: 9pt; color: #999;">git</a>

  
  <a href="/tags.html#cygwin-ref" rel="nofollow" style="font-size: 9pt; color: #999;">cygwin</a>

  
  <a href="/tags.html#error-ref" rel="nofollow" style="font-size: 9pt; color: #999;">error</a>

  
  <a href="/tags.html#test-ref" rel="nofollow" style="font-size: 9pt; color: #999;">test</a>

  
  <a href="/tags.html#script-ref" rel="nofollow" style="font-size: 9pt; color: #999;">script</a>

  
  <a href="/tags.html#code-ref" rel="nofollow" style="font-size: 9pt; color: #999;">code</a>

  
  <a href="/tags.html#dropbox-ref" rel="nofollow" style="font-size: 9pt; color: #999;">dropbox</a>

  
  <a href="/tags.html#github-ref" rel="nofollow" style="font-size: 9pt; color: #999;">github</a>

  
  <a href="/tags.html#AMS-ref" rel="nofollow" style="font-size: 9pt; color: #999;">AMS</a>

  
  <a href="/tags.html#symbols-ref" rel="nofollow" style="font-size: 9pt; color: #999;">symbols</a>

  
  <a href="/tags.html#mathjax-ref" rel="nofollow" style="font-size: 9pt; color: #999;">mathjax</a>

  
  <a href="/tags.html#latex-ref" rel="nofollow" style="font-size: 9pt; color: #999;">latex</a>

  
  <a href="/tags.html#tex-ref" rel="nofollow" style="font-size: 9pt; color: #999;">tex</a>

  
  <a href="/tags.html#command-ref" rel="nofollow" style="font-size: 9pt; color: #999;">command</a>

  
  <a href="/tags.html#haskell-ref" rel="nofollow" style="font-size: 9pt; color: #999;">haskell</a>

  
  <a href="/tags.html#cabal-ref" rel="nofollow" style="font-size: 9pt; color: #999;">cabal</a>

  
  <a href="/tags.html#ghc-ref" rel="nofollow" style="font-size: 9pt; color: #999;">ghc</a>

  
  <a href="/tags.html#installation-ref" rel="nofollow" style="font-size: 9pt; color: #999;">installation</a>

</div>
</section>

  <!--section id="xiami" style="padding-top:10px; height:275px; overflow-y:hidden;"><script type="text/javascript" src="http://www.xiami.com/widget/player-multi?uid=30536045&sid=1771893720,1771286689,1771179817,1460646,3418644,2178964,1275039,&width=250&height=320&mainColor=aaaaaa&backColor=e6e6e6&autoplay=0&mode=js"></script>
</section-->

<div id="fixed-container">
  <section id="rlist"><a href="#"><i class="fa fa-code fa-2"></i> 代码仓库</a>
<ul>
  <li><a href="http://github.com/liberize/liberize.github.com">本博客源码</a></li>
  <!--
  <li><a href="http://github.com/liberize/rhythmbox-doubanfm-plugin">Rhythmbox 豆瓣 FM 插件</a></li>
  <li><a href="http://github.com/liberize/rhythmbox-osdlyrics-plugin">Rhythmbox 歌词插件</a></li>
  -->
</ul>
</section>
  <section id="llist"><a href="#"><i class="fa fa-link fa-2"></i> 友情链接</a>
<ul>
  <li><a href="https://github.com/Shopify/liquid/wiki/Liquid-for-Designers" target="_blank" rel="nofollow">Liquid 模板引擎</a></li>
  <li><a href="http://jekyllrb.com/" target="_blank" rel="nofollow">Jekyll 静态博客生成器</a></li>
</ul>
</section>
  <section id="clist"><a href="#"><i class="fa fa-heart fa-2"></i> 与我联系</a>
<div id="contacts-list">
  <a href="mailto:wzjwzj@mail.ustc.edu.cn" target="_blank" rel="nofollow" title="Gmail">
    <i class="fa fa-envelope fa-3"></i>
  </a>
  <a href="http://wzjwzj.github.io/" target="_blank" rel="nofollow" title="Github">
    <i class="fa fa-github fa-3"></i>
  </a>
  <a href="http://wzjwzj.github.io/" target="_blank" rel="nofollow" title="新浪微博">
    <i class="fa fa-weibo fa-3"></i>
  </a>
  <a href="https://sites.google.com/site/guyueshuiming/" target="_blank" rel="nofollow" title="Google+">
    <i class="fa fa-google-plus fa-3"></i>
  </a>
  <a href="http://wzjwzj.github.io/" target="_blank" rel="nofollow" title="Twitter">
    <i class="fa fa-twitter fa-3"></i>
  </a>
  <a href="http://wzjwzj.github.io/" target="_blank" rel="nofollow" title="Facebook">
    <i class="fa fa-facebook-square fa-3"></i>
  </a>
</div>
</section>
</div>


	
      </aside>
      <!-- Main Content -->
      <div id="main-inner">
        <div id="loader"><img src="/assets/themes/twitter/img/loading.gif" alt="请稍侯"></div>
        <div id="main-content">
          
<section id="content">
  <article class="post">

    <header>
      <h1>[转]Pjax是什么以及为什么推荐大家用</h1>
    </header>

    <section>
      <div class="post-extra">
        <div class="pull-left">
	   <span>09 February 2014  <a href="https://github.com/wzjwzj/wzjwzj.github.com/edit/master/_posts/2014-02-09-pjax.md">编辑本文</a></span>
        </div>
	
      </div>
      <p>转载自<a href="http://blog.linjunhalida.com/blog/pjax/">http://blog.linjunhalida.com/blog/pjax/</a></p>

<a name="L.........pjax."></a>
<h2>什么是pjax?</h2>

<hr />

<p>现在很多网站(<a href="https://twitter.com/">facebook</a>,
<a href="https://twitter.com/">twitter</a>)都支持这样的一种浏览方式，
当你点击一个站内的链接的时候， 不是做页面跳转， 而是只是站内页面刷新。
这样的用户体验， 比起整个页面都闪一下来说， 好很多。</p>

<p>其中有一个很重要的组成部分， 这些网站的ajax刷新是支持浏览器历史的，
刷新页面的同时， 浏览器地址栏位上面的地址也是会更改，
用浏览器的回退功能也能够回退到上一个页面。</p>

<p>那么如果我们想要实现这样的功能， 我们如何做呢？</p>

<p>我发现pjax提供了一个脚本支持这样的功能。</p>

<p>pjax项目地址在
<a href="https://github.com/defunkt/jquery-pjax">https://github.com/defunkt/jquery-pjax</a>
。 实际的效果见： <a href="http://pjax.heroku.com">http://pjax.heroku.com</a>/
没有勾选pjax的时候， 点击链接是跳转的。 勾选了之后，
链接都是变成了ajax刷新。</p>

<!--end_excerpt-->


<a name="L...............pjax."></a>
<h2>为什么要用pjax?</h2>

<hr />

<p>pjax有好几个好处：</p>

<ul>
<li><p>用户体验提升。</p>

<p>页面跳转的时候人眼需要对整个页面作重新识别， 刷新部分页面的时候，
只需要重新识别其中一块区域。自从我在自己的网站
<a href="http://gurudigger.com/">GuruDigger</a> 上面采用了pjax技术后，
不由觉得访问其他只有页面跳转的网站难受了许多。 同时，
由于刷新部分页面的时候提供了一个loading的提示，
以及在刷新的时候旧页面还是显示在浏览器中，
用户能够容忍更长的页面加载时间。</p></li>
<li><p>极大地减少带宽消耗和服务器消耗。</p>

<p>由于只是刷新部分页面， 大部分的请求（css/js）都不会重新获取，
网站带有用户登录信息的外框部分都不需要重新生成了。
虽然我没有具体统计这部分的消耗， 我估计至少有40%以上的请求，
30%以上的服务器消耗被节省了。</p></li>
</ul>


<p>坏处我觉得也有：</p>

<ul>
<li><p>IE6等历史浏览器的支持</p>

<p>虽然我没有实际测试， 但是由于pjax利用到了新的标准，
旧的浏览器兼容会有问题。 不过pjax本身支持fallback，
当发现浏览器不支持该功能的时候， 会回到原始的页面跳转上面去。</p></li>
<li><p>复杂的服务器端支持</p>

<p>服务器端需要根据过来的请求， 判断是作全页面渲染还是部分页面渲染，
相对来说系统复杂度增大了。 不过对于设计良好的服务器代码，
支持这样的功能不会有太大的问题。</p></li>
</ul>


<p>综合起来， 由于用户体验和资源利用率的提升， 坏处是可以完全得到弥补的。
<strong>我强烈推荐大家使用。</strong></p>

<a name="L............pjax."></a>
<h2>如何使用pjax?</h2>

<hr />

<p>直接看 <a href="https://github.com/defunkt/jquery-pjax">官方文档</a> 就可以了。</p>

<p>我觉得做技术的人要养成看一手的技术资料的习惯。</p>

<p>有一个rails针对pjax的 <a href="https://github.com/rails/pjax_rails">gem插件</a>
可以直接使用。 也有
<a href="https://github.com/jacobian/django-pjax">django的支持</a> 。</p>

<a name="pjax........."></a>
<h2>pjax的原理</h2>

<hr />

<p>为了能够处理问题， 我们需要能够理解pjax的运作方式。
pjax的代码只有一个文件：
<a href="https://github.com/defunkt/jquery-pjax/blob/master/jquery.pjax.js">https://github.com/defunkt/jquery-pjax/blob/master/jquery.pjax.js</a></p>

<p>如果有能力， 可以自己去看一遍。 我这里解释一下原理。</p>

<p>首先， 我们在html里面指定， 需要做pjax的链接内容是哪些，
以及点击之后需要更新的部分（放在data-pjax属性里面）:</p>

<pre><code>$('a[data-pjax]').pjax()
</code></pre>

<p>当加载了pjax脚本之后， 它会拦截这些链接的事件， 然后包装成一个ajax请求，
发送给服务器。</p>

<pre><code>$.fn.pjax = function( container, options ) {
  return this.live('click.pjax', function(event){
    handleClick(event, container, options)
  })
}

function handleClick(event, container, options) {
  $.pjax($.extend({}, defaults, options))
  ...
  event.preventDefault()
}
var pjax = $.pjax = function( options ) {
  ...
  pjax.xhr = $.ajax(options)
}
</code></pre>

<p>这个请求带有X-PJAX的HEADER标识， 服务器在收到这样的请求的时候，
就知道只需要渲染部分页面返回就可以了。</p>

<pre><code>xhr.setRequestHeader('X-PJAX', 'true')
xhr.setRequestHeader('X-PJAX-Container', context.selector)
</code></pre>

<p>pjax接受到返回的请求之后， 更新data-pjax指定的区域，
同时也会更新浏览器的地址。</p>

<pre><code>options.success = function(data, status, xhr) {
  var container = extractContainer(data, xhr, options)
  ...
  if (container.title) document.title = container.title
  context.html(container.contents)
}
</code></pre>

<p>为了能够支持浏览器的后退， 利用到了history的api， 记录下来对应的信息，</p>

<pre><code>pjax.state = {
  id: options.id || uniqueId(),
  url: container.url,
  container: context.selector,
  fragment: options.fragment,
  timeout: options.timeout
}

if (options.push || options.replace) {
  window.history.replaceState(pjax.state, container.title, container.url)
}
</code></pre>

<p>当浏览器后退的时候， 拦截事件， 根据记录的历史信息，
产生一个新的ajax请求。</p>

<pre><code>$(window).bind('popstate', function(event){
  var state = event.state
  if (state &amp;&amp; state.container) {
    var container = $(state.container)
    if (container.length) {
      ...
      var options = {
        id: state.id,
        url: state.url,
        container: container,
        push: false,
        fragment: state.fragment,
        timeout: state.timeout,
        scrollTo: false
      }

      if (contents) {
        // pjax event is deprecated
        $(document).trigger('pjax', [null, options])
        container.trigger('pjax:start', [null, options])
        // end.pjax event is deprecated
        container.trigger('start.pjax', [null, options])

        container.html(contents)
        pjax.state = state

        container.trigger('pjax:end', [null, options])
        // end.pjax event is deprecated
        container.trigger('end.pjax', [null, options])
      } else {
        $.pjax(options)
      }
      ...
    }
  }
}
</code></pre>

<p>为了支持fallback， 一个是在加载的时候判断浏览器是否支持history push
state API：</p>

<pre><code>// Is pjax supported by this browser?
$.support.pjax =
  window.history &amp;&amp; window.history.pushState &amp;&amp; window.history.replaceState
  // pushState isn't reliable on iOS until 5.
  &amp;&amp; !navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/)
</code></pre>

<p>另一个是当发现请求一段时间没有回复的时候（可以设置参数timeout），
直接做页面跳转。</p>

<pre><code>options.beforeSend = function(xhr, settings) {
  if (settings.timeout &gt; 0) {
    timeoutTimer = setTimeout(function() {
      if (fire('pjax:timeout', [xhr, options]))
        xhr.abort('timeout')
    }, settings.timeout)

    // Clear timeout setting so jquerys internal timeout isn't invoked
    settings.timeout = 0
</code></pre>

<a name="L......"></a>
<h2>结论</h2>

<hr />

<p>既然都看到这里了， 你为什么不去实际使用一下pjax呢？ 有那么多好处，
我觉得几乎所有网站都应该采用pjax。 赶紧用起来吧！</p>

      
      <footer>
        <p>
          本作品由 <a href="mailto:wzjwzj@mail.ustc.edu.cn" rel="nofollow">孤月谁明</a> 创作，采用
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="查看协议详细信息" target="_blank">CC BY-NC-SA 3.0 许可协议</a>
          进行许可。
        </p>
      </footer>
      
    </section>

  </article>
</section>

<section>

  
  <ul class="tag-box inline">
    <li><i class="fa fa-folder-open fa-4"></i></li>
    
    


  
     
    	<li><a href="/categories.html#uncategorized-ref" rel="nofollow">
    		uncategorized <span>8</span>
    	</a></li>
    
  


  </ul>
  

  
  <ul class="tag-box inline">
    <li><i class="fa fa-tags fa-4"></i></li>
    
    


  
     
    	<li><a href="/tags.html#info-ref" rel="nofollow">info <span>11</span></a></li>
    
  



  </ul>
  

  <div class="pagination">
    <ul>
      
      <li class="prev"><a href="/blog/2014/02/08/nationalparks-in-deutschland" title="测试谷歌地图:德国国家公园">&larr; 上一篇</a></li>
      
      <li><a href="/archive.html" rel="nofollow">文章列表</a></li>
      
      <li class="next"><a href="/blog/2014/02/17/tar" title="[转]tar 压缩解压缩命令详解">下一篇 &rarr;</a></li>
      
    </ul>
  </div>

</section>

<section id="comments">
  


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'guyueshuiming'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var dsc = document.createElement('script'); dsc.type = 'text/javascript'; dsc.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        dsc.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(dsc);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




</section>


        </div>
      </div>
      
      <div id="back-top">
  <a href="#top" title="回到顶部"></a>
</div>
<script type="text/javascript">
$("#back-top").hide();
$(document).ready(function () {
  $(window).scroll(function () {
    if ($(this).scrollTop() > 100) {
      $('#back-top').fadeIn();
    } else {
      $('#back-top').fadeOut();
    }
  });
  $('#back-top a').click(function () {
    $('body,html').animate({
      scrollTop: 0
    }, 800);
    return false;
  });
});
</script>

    </section>

    <footer id="bottom">
      <p align="center">&copy; 2014 guyueshuiming
        with help from <a href="http://jekyllbootstrap.com" target="_blank" rel="nofollow" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
        and <a href="http://twitter.github.com/bootstrap/" target="_blank" rel="nofollow">Twitter Bootstrap</a>
      </p>
    </footer>
  </div>




<!-- fixed toc or fix container -->

<script type="text/javascript">
   $(document).ready(function(){
   
      var f= $('#fixed-container') ;
   

   f.css({ 'z-index':'99999'});
   var h= f.height();
   var position = f.offset();

   $(window).scroll(function() {
      if($(window).scrollTop() > position.top ) {
         v = 129 + h - $(window).innerHeight()  ;
         u = $( document ).height()-$(window).scrollTop()-$(window).innerHeight();
         if( v > 0 && u < h && u < v ) {
            f.css('position','fixed').css('top',-(u+v));
         } else {
            f.css('position','fixed').css('top', -1);
         }
      } else {
       f.css('position','static');
      }
   });
   if(matchMedia) {
     var mq = matchMedia('(max-width: 999px)');
     mq.addListener(function(mql) {
       if (!mql.matches) {
         position = f.offset();
       }
     });
   }
});
</script>

<script type="text/javascript">
  $(document).ready(function() {
    $("table.highlighttable").wrap('<div style="overflow:auto;border: 1px solid rgba(0,0,0,0.15);border-radius: 4px;"></div>');
    /*$('pre:not(table.highlighttable pre, div.highlight pre, div.gist pre, pre.plain)').addClass('prettyprint linenums').attr('style', 'overflow:auto'); 
      $.getScript('/assets/prettify/prettify.js',function(){ prettyPrint();});*/
    $("#icon-resize").click(function(){
      if($(this).hasClass("fa-expand")){
         $(this).removeClass("fa-expand");
         $(this).addClass("fa-compress");
	 $("#wrap").css("width","100%");
      } else{
         $(this).removeClass("fa-compress");
         $(this).addClass("fa-expand");
	 $("#wrap").css("width","1000px");
      }
     });
     	
  });
</script>

<script src="/assets/themes/twitter/js/hc.js" type="text/javascript"></script>
<!--script src="http://dict.cn/hc/" type="text/javascript"></script-->
<script type="text/javascript">
dictInit();
</script>
</body>
</html>

